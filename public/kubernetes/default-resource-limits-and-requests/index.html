<!DOCTYPE html>
<html lang="en">

    <head><title>Default resource limits and requests &ndash; Literate DevOps</title>
<meta name="description" content="Preparing to be a certified Kubernetes administrator (with four years professional Kubernetes experience). Part time Emacs and literate DevOps enthusiast.">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8"/>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css" integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin="anonymous" />


<link rel="stylesheet" href="https://literate-devops.io/css/palettes/solarized-dark.css">
<link rel="stylesheet" href="https://literate-devops.io/css/risotto.css">
<link rel="stylesheet" href="https://literate-devops.io/css/custom.css">
</head>

    <body>
        <div class="page">

            <header class="page__header"><h1 class="page__logo"><a href="https://literate-devops.io/" class="page__logo-inner">Literate DevOps</a></h1>
<nav class="page__nav main-nav">
    <ul>
    
    
    <li class="main-nav__item"><a class="nav-main-item" href="https://literate-devops.io/cv/" title="">CV</a></li>
    
    <li class="main-nav__item"><a class="nav-main-item" href="https://literate-devops.io/kubernetes/" title="">Kubernetes</a></li>
    
    </ul>
</nav>

</header>

            <section class="page__body">
    <header class="content__header">
        <h1>Default resource limits and requests</h1>
    </header>
    <div class="content__body">
        <p>When a pod exceeds its CPU limit, it gets throttled. When a pod exceeds its memory limit, it is not immediately terminated. Only if a pod continuously exceeds its memory limit is it terminated.</p>
<p>The default limits and requests for a pod are used when no resource requirements have been defined within the spec. This can useful when you have a resource quota applied to the same namespace as the pod. In circumstances when no limits have been set, and a cpu and memory resouce quota is in effect, the pod will fail to run, and you will receive an error. By setting the default limits and requests, you can mitigate this issue, and stop such circumstances from occuring. Instead, a pod will receive the default values (added to its spec) when it is missing a cpu or memory resource requirement.</p>
<p><strong>Note</strong>: whenever a cpu or memory request is left undefined, but the corresponding limits have been set, the resource requests are implicitly set to the same value as that of the resource limits.</p>
<h2 id="create-the-default--cpu-and-memory--limits-and-requests">Create the default (CPU and memory) limits and requests</h2>
<p>No imperative command.</p>
<p>Example manifest:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span><span style="color:#268bd2">apiVersion</span>: v1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span><span><span style="color:#268bd2">kind</span>: LimitRange
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span><span><span style="color:#268bd2">metadata</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span><span>  <span style="color:#268bd2">name</span>: cpu-limit-range
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span><span><span style="color:#268bd2">spec</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span><span>  <span style="color:#268bd2">limits</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span><span>  - <span style="color:#268bd2">default</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span><span>      <span style="color:#268bd2">cpu</span>: <span style="color:#2aa198">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span><span>    <span style="color:#268bd2">defaultRequest</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span><span>      <span style="color:#268bd2">cpu</span>: <span style="color:#2aa198">0.5</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span><span>    <span style="color:#268bd2">type</span>: Container
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span><span>---
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span><span><span style="color:#268bd2">apiVersion</span>: v1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span><span><span style="color:#268bd2">kind</span>: LimitRange
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span><span><span style="color:#268bd2">metadata</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span><span>  <span style="color:#268bd2">name</span>: memory-limit-range
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span><span><span style="color:#268bd2">spec</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span><span>  <span style="color:#268bd2">limits</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span><span>  - <span style="color:#268bd2">default</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span><span>      <span style="color:#268bd2">memory</span>: 512Mi
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21</span><span>    <span style="color:#268bd2">defaultRequest</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22</span><span>      <span style="color:#268bd2">memory</span>: 256Mi
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23</span><span>    <span style="color:#268bd2">type</span>: Container
</span></span></code></pre></div><p><strong>CKA Exam Tip</strong>: limit ranges require that you reference the <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/">kubernetes.io</a> documentation, since no imperative command exists. You can always use the <code>kubectl explain</code> command to infer what fields you should use.</p>
<p>Resource output for a limit range:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl get limitranges/<span style="color:#268bd2">$NAME</span> --namespace<span style="color:#719e07">=</span><span style="color:#268bd2">$NAMESPACE</span>
</span></span></code></pre></div><p>Describe a limit range:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl describe limitranges/<span style="color:#268bd2">$NAME</span> --namespace<span style="color:#719e07">=</span><span style="color:#268bd2">$NAMESPACE</span>
</span></span></code></pre></div>
    </div>
    <footer class="content__footer"></footer>

            </section>

            <section class="page__aside">
                <div class="aside__about">
<div class="aside__about">
    <img class="about__logo" src="https://literate-devops.io/images/console-dark.svg" alt="Logo">
<h1 class="about__title">James Hilling BSc</h1>
<p class="about__description">Preparing to be a certified Kubernetes administrator (with four years professional Kubernetes experience). Part time Emacs and literate DevOps enthusiast.</p>
</div>


<ul class="aside__social-links">
    
    <li>
        <a href="https://github.com/James5979" rel="me" aria-label="GitHub" title="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>&nbsp;
    </li>
    
    <li>
        <a href="mailto:literate-devops@use.startmail.com" rel="me" aria-label="Email" title="Email"><i class="fa-solid fa-envelope" aria-hidden="true"></i></a>&nbsp;
    </li>
    
    <li>
        <a href="https://mastodon.social/@james5979" rel="me" aria-label="Mastodon" title="Mastodon"><i class="fa-solid fa-comment" aria-hidden="true"></i></a>&nbsp;
    </li>
    
</ul>
</div>
                <hr>
                <div class="aside__content">
    
    

                </div>
            </section>

            <footer class="page__footer"><p>
    
    
    
    
    
    
      
    
      
    
    
    
</p>
<br /><br />
<p class="copyright">© 2023 James Hilling</p>
<p class="advertisement">Powered by <a href="https://gohugo.io/">hugo</a> and <a href="https://github.com/joeroe/risotto">risotto</a>.</p>
</footer>

        </div>
    </body>

</html>
